// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Volunteer {
    id                      String                      @default(cuid()) @id
    name                    String
    verificationState       String
    cities                  CitiesOnVolunteers[]
    activities              ActivitiesOnVolunteers[]
    social                  VolunteerSocial[]
    paymentOptions          VolunteerPaymentOption[]
}

model CitiesOnVolunteers {
    volunteer               Volunteer    @relation(fields: [volunteerId], references: [id])
    volunteerId             String
    city                    City         @relation(fields: [cityId], references: [id])
    cityId                  String

    @@id([volunteerId, cityId])
}

model ActivitiesOnVolunteers {
    volunteer               Volunteer   @relation(fields: [volunteerId], references: [id])
    volunteerId             String
    activity                Activity    @relation(fields: [activityId], references: [id])
    activityId              String

    @@id([volunteerId, activityId])
}

model VolunteerSocial {
    id                      String                              @default(cuid()) @id
    url                     String
    providers               SocialProvidersOnVolunteerSocial[]
    volunteer               Volunteer                           @relation(fields: [volunteerId], references: [id])
    volunteerId             String
}

model SocialProvidersOnVolunteerSocial {
    volunteerSocial         VolunteerSocial    @relation(fields: [volunteerSocialId], references: [id])
    volunteerSocialId       String
    socialProvider          SocialProvider     @relation(fields: [socialProviderId], references: [id])
    socialProviderId        String

    @@id([volunteerSocialId, socialProviderId])
}

model VolunteerPaymentOption {
    id                        String                          @default(cuid()) @id
    metadata                  Json
    paymentProviders          PaymentProvidersOnVolunteerPaymentOptions[]
    volunteer                 Volunteer                       @relation(fields: [volunteerId], references: [id])
    volunteerId               String
}

model PaymentProvidersOnVolunteerPaymentOptions {
    volunteerPaymentOption      VolunteerPaymentOption    @relation(fields: [volunteerPaymentOptionId], references: [id])
    volunteerPaymentOptionId    String
    paymentProvider             PaymentProvider           @relation(fields: [paymentProviderId], references: [id])
    paymentProviderId           String

    @@id([volunteerPaymentOptionId, paymentProviderId])
}

model SocialProvider {
    id                      String    @default(cuid()) @id
    title                   String
    volunteerSocial         SocialProvidersOnVolunteerSocial[]
}

model PaymentProvider {
    id                      String    @default(cuid()) @id
    title                   String
    paymentOptions          PaymentProvidersOnVolunteerPaymentOptions[]
}

model City {
    id                      String    @default(cuid()) @id
    title                   String
    volunteers              CitiesOnVolunteers[]
}

model Activity {
    id                      String    @default(cuid()) @id
    title                   String
    volunteers              ActivitiesOnVolunteers[]
}
